{"ast":null,"code":"import { uuid, toArray } from './util';\n\nfunction formatCSSText(style) {\n  const content = style.getPropertyValue('content');\n  return `${style.cssText} content: '${content.replace(/'|\"/g, '')}';`;\n}\n\nfunction formatCSSProperties(style) {\n  return toArray(style).map(name => {\n    const value = style.getPropertyValue(name);\n    const priority = style.getPropertyPriority(name);\n    return `${name}: ${value}${priority ? ' !important' : ''};`;\n  }).join(' ');\n}\n\nfunction getPseudoElementStyle(className, pseudo, style) {\n  const selector = `.${className}:${pseudo}`;\n  const cssText = style.cssText ? formatCSSText(style) : formatCSSProperties(style);\n  return document.createTextNode(`${selector}{${cssText}}`);\n}\n\nfunction clonePseudoElement(nativeNode, clonedNode, pseudo) {\n  const style = window.getComputedStyle(nativeNode, pseudo);\n  const content = style.getPropertyValue('content');\n\n  if (content === '' || content === 'none') {\n    return;\n  }\n\n  const className = uuid();\n\n  try {\n    clonedNode.className = `${clonedNode.className} ${className}`;\n  } catch (err) {\n    return;\n  }\n\n  const styleElement = document.createElement('style');\n  styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n  clonedNode.appendChild(styleElement);\n}\n\nexport function clonePseudoElements(nativeNode, clonedNode) {\n  clonePseudoElement(nativeNode, clonedNode, ':before');\n  clonePseudoElement(nativeNode, clonedNode, ':after');\n}","map":{"version":3,"mappings":"AAAA,SAASA,IAAT,EAAeC,OAAf,QAA8B,QAA9B;;AAIA,SAASC,aAAT,CAAuBC,KAAvB,EAAiD;EAC/C,MAAMC,OAAO,GAAGD,KAAK,CAACE,gBAAN,CAAuB,SAAvB,CAAhB;EACA,OAAO,GAAGF,KAAK,CAACG,OAAO,cAAcF,OAAO,CAACG,OAAR,CAAgB,MAAhB,EAAwB,EAAxB,CAA2B,IAAhE;AACD;;AAED,SAASC,mBAAT,CAA6BL,KAA7B,EAAuD;EACrD,OAAOF,OAAO,CAASE,KAAT,CAAP,CACJM,GADI,CACCC,IAAD,IAAS;IACZ,MAAMC,KAAK,GAAGR,KAAK,CAACE,gBAAN,CAAuBK,IAAvB,CAAd;IACA,MAAME,QAAQ,GAAGT,KAAK,CAACU,mBAAN,CAA0BH,IAA1B,CAAjB;IAEA,OAAO,GAAGA,IAAI,KAAKC,KAAK,GAAGC,QAAQ,GAAG,aAAH,GAAmB,EAAE,GAAxD;EACD,CANI,EAOJE,IAPI,CAOC,GAPD,CAAP;AAQD;;AAED,SAASC,qBAAT,CACEC,SADF,EAEEC,MAFF,EAGEd,KAHF,EAG4B;EAE1B,MAAMe,QAAQ,GAAG,IAAIF,SAAS,IAAIC,MAAM,EAAxC;EACA,MAAMX,OAAO,GAAGH,KAAK,CAACG,OAAN,GACZJ,aAAa,CAACC,KAAD,CADD,GAEZK,mBAAmB,CAACL,KAAD,CAFvB;EAIA,OAAOgB,QAAQ,CAACC,cAAT,CAAwB,GAAGF,QAAQ,IAAIZ,OAAO,GAA9C,CAAP;AACD;;AAED,SAASe,kBAAT,CACEC,UADF,EAEEC,UAFF,EAGEN,MAHF,EAGgB;EAEd,MAAMd,KAAK,GAAGqB,MAAM,CAACC,gBAAP,CAAwBH,UAAxB,EAAoCL,MAApC,CAAd;EACA,MAAMb,OAAO,GAAGD,KAAK,CAACE,gBAAN,CAAuB,SAAvB,CAAhB;;EACA,IAAID,OAAO,KAAK,EAAZ,IAAkBA,OAAO,KAAK,MAAlC,EAA0C;IACxC;EACD;;EAED,MAAMY,SAAS,GAAGhB,IAAI,EAAtB;;EAEA,IAAI;IACFuB,UAAU,CAACP,SAAX,GAAuB,GAAGO,UAAU,CAACP,SAAS,IAAIA,SAAS,EAA3D;EACD,CAFD,CAEE,OAAOU,GAAP,EAAY;IACZ;EACD;;EAED,MAAMC,YAAY,GAAGR,QAAQ,CAACS,aAAT,CAAuB,OAAvB,CAArB;EACAD,YAAY,CAACE,WAAb,CAAyBd,qBAAqB,CAACC,SAAD,EAAYC,MAAZ,EAAoBd,KAApB,CAA9C;EACAoB,UAAU,CAACM,WAAX,CAAuBF,YAAvB;AACD;;AAED,OAAM,SAAUG,mBAAV,CACJR,UADI,EAEJC,UAFI,EAES;EAEbF,kBAAkB,CAACC,UAAD,EAAaC,UAAb,EAAyB,SAAzB,CAAlB;EACAF,kBAAkB,CAACC,UAAD,EAAaC,UAAb,EAAyB,QAAzB,CAAlB;AACD","names":["uuid","toArray","formatCSSText","style","content","getPropertyValue","cssText","replace","formatCSSProperties","map","name","value","priority","getPropertyPriority","join","getPseudoElementStyle","className","pseudo","selector","document","createTextNode","clonePseudoElement","nativeNode","clonedNode","window","getComputedStyle","err","styleElement","createElement","appendChild","clonePseudoElements"],"sources":["../src/clonePseudoElements.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}